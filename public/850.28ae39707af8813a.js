"use strict";(self.webpackChunkcustomer=self.webpackChunkcustomer||[]).push([[850],{8850:(nt,k,a)=>{a.r(k),a.d(k,{MyLearningModule:()=>A});var c=a(6895),F=a(3572),r=a(9653),C=a(5698),P=a(4629);const U=(0,r.PH)("[Learnings Resolver] Load All Learnings"),T=(0,r.PH)("[Load Learnings Effect] All Learnings Loaded",(0,r.Ky)()),M=(0,P.H)({selectId:o=>o._id}),R=M.getInitialState({}),E=(0,r.Lq)(R,(0,r.on)(T,(o,i)=>M.setAll(i.myLearnings,{...o,allMyLearningsLoaded:!0}))),{selectAll:x,selectEntities:S}=M.getSelectors(),Y=(0,r.ZF)("myLearnings"),I=(0,r.P1)(Y,x),z=(0,r.P1)(I,o=>o.length),H=(0,r.P1)(Y,o=>o.allMyLearningsLoaded),J=(0,r.P1)(Y,S),$=o=>(0,r.P1)(J,i=>i[o]);var t=a(4650),s=a(5467),b=a(5931),Q=a(149),O=a(3629);const K=function(o){return["/app/mylearning/id/",o]},N=function(o){return["/app/mylearning/myevaluation/",o]};class y{constructor(){this.RAW_URL=O.N.RAW_URL}static#t=this.\u0275fac=function(n){return new(n||y)};static#n=this.\u0275cmp=t.Xpm({type:y,selectors:[["frontend-card-learning"]],inputs:{learning:"learning",book:"book"},decls:13,vars:12,consts:[[1,"card-book"],[1,"card-container",3,"routerLink"],[1,"upper-container"],[1,"image",3,"src","alt"],[1,"line"],[1,"lower-container"],[1,"toolbar-price"],["title","Claim",1,"toolbar-button",3,"routerLink"],[1,"pi","pi-dollar"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t._UZ(4,"div",4),t.TgZ(5,"div",5)(6,"h2"),t._uU(7),t.qZA()()(),t.TgZ(8,"span",6),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"button",7),t._UZ(12,"i",8),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.VKq(8,K,e.learning._id)),t.xp6(2),t.Q6J("src",e.RAW_URL+(null==e.book?null:e.book.image),t.LSH)("alt",e.RAW_URL+(null==e.book?null:e.book.image)),t.xp6(4),t.Oqu(null==e.book?null:e.book.name),t.xp6(2),t.hij(" ",t.lcZ(10,6,e.learning.price),""),t.xp6(2),t.Q6J("routerLink",t.VKq(10,N,e.learning._id)))},dependencies:[s.rH,c.H9],encapsulation:2})}function B(o,i){if(1&o&&t._UZ(0,"frontend-card-learning",4),2&o){const n=i.$implicit,e=t.oxw(2);t.Q6J("learning",n)("book",e.book(n.book._id))}}function G(o,i){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,B,1,2,"frontend-card-learning",3),t.ALo(2,"async"),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.allMyLearnings$))}}function W(o,i){1&o&&t._UZ(0,"frontend-nothing")}class d{constructor(i,n,e,l){this.router=i,this.alertService=n,this.route=e,this.store=l}ngOnInit(){this.route.queryParams.subscribe(i=>{const n=i.state;n&&("success"===n?this.alertService.fire({title:"Your purchased was succesful!!",text:"Enjoy your summarise..",icon:"success"},{urlConfi:"/app/mylearning",urlCancel:"/app/mylearning"}):"fail"===n&&this.alertService.fire({title:"The payment was unsuccesful!! ",text:"Check your card or try again",icon:"error"},{urlConfi:"/app/mylearning",urlCancel:"/app/mylearning"}))}),this.reload()}reload(){this.allMyLearnings$=this.store.pipe((0,r.Ys)(I)),this.countMyLearnings$=this.store.pipe((0,r.Ys)(z))}book(i){let n;return this.store.pipe((0,r.Ys)((0,F.NK)(i)),(0,C.q)(1)).subscribe(e=>n=e),n}static#t=this.\u0275fac=function(n){return new(n||d)(t.Y36(s.F0),t.Y36(b.c9),t.Y36(s.gz),t.Y36(r.yh))};static#n=this.\u0275cmp=t.Xpm({type:d,selectors:[["frontend-my-learning-list"]],decls:3,vars:4,consts:[["class","list-container",4,"ngIf"],[4,"ngIf"],[1,"list-container"],[3,"learning","book",4,"ngFor","ngForOf"],[3,"learning","book"]],template:function(n,e){1&n&&(t.YNc(0,G,3,3,"div",0),t.YNc(1,W,1,0,"frontend-nothing",1),t.ALo(2,"async")),2&n&&(t.Q6J("ngIf",e.allMyLearnings$),t.xp6(1),t.Q6J("ngIf",0===t.lcZ(2,2,e.countMyLearnings$)))},dependencies:[c.sg,c.O5,Q.v,y,c.Ov],encapsulation:2})}class m{constructor(i,n,e,l){this.route=i,this.location=n,this.store=e,this.router=l,this.route.params.subscribe(h=>{h.id?this.store.pipe((0,r.Ys)($(h.id))).subscribe(Z=>{Z?this.learning=Z:this.router.navigate(["/app/mylearning"])}):this.router.navigate(["/app/mylearning"])})}evaluation(){this.router.navigate([`/app/mylearning/${this.learning._id}/myevaluation`])}back(){this.location.back()}static#t=this.\u0275fac=function(n){return new(n||m)(t.Y36(s.gz),t.Y36(c.Ye),t.Y36(r.yh),t.Y36(s.F0))};static#n=this.\u0275cmp=t.Xpm({type:m,selectors:[["frontend-my-learning-view"]],decls:14,vars:3,consts:[[1,"content-container"],[1,"learning-header"],["routerLink","/app/mylearning"],[1,"pi","pi-angle-left"],[3,"routerLink"],[1,"pi","pi-angle-right"],[1,"card-content"],[3,"innerHTML"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"span"),t._uU(5," Back to My Learning"),t.qZA()(),t.TgZ(6,"div",4)(7,"span"),t._uU(8," Go to Evaluation"),t.qZA(),t._UZ(9,"i",5),t.qZA()(),t.TgZ(10,"div",6)(11,"h2"),t._uU(12),t.qZA(),t._UZ(13,"div",7),t.qZA()()),2&n&&(t.xp6(6),t.s9C("routerLink","/app/mylearning/myevaluation/"+e.learning._id),t.xp6(6),t.Oqu(e.learning.book.name),t.xp6(1),t.s9C("innerHTML",e.learning.book.content,t.oJD))},dependencies:[s.rH],encapsulation:2})}var f=a(433);class v{constructor(i,n,e,l,h,Z){this.route=i,this.location=n,this.formBuilder=e,this.router=l,this.alert=h,this.store=Z}ngOnInit(){this.evaluationForm=this.formBuilder.group({evaluation:this.formBuilder.array([])}),this.route.params.pipe((0,C.q)(1)).subscribe(i=>{i.id?this.store.pipe((0,r.Ys)($(i.id))).subscribe(n=>{n?(this.learning=n,this.learning.book.evaluation.forEach(e=>{this.getEvaluationArrayForm().push(new f.NI(null,[f.kI.required,f.kI.pattern(e.correctKey)]))})):this.router.navigate(["/app/mylearning"])}):this.router.navigate(["/app/mylearning"])})}onSubmit(){this.alert.fire(this.evaluationForm.invalid?{text:"The answers are incorrect",icon:"error"}:{text:"Congratulations",icon:"error"},{urlConfi:`/app/mylearning/${this.learning._id}`,urlCancel:`/app/mylearning/${this.learning._id}`})}getQuestion(i){return this.getEvaluationArray()[i].question}getOptionArray(i){return this.getEvaluationArray()[i].options}getOption(i,n){return this.getOptionArray(i)[n].option}getKey(i,n){return this.getOptionArray(i)[n].key}getEvaluationArray(){return this.learning.book.evaluation}getEvaluationArrayForm(){return this.evaluationForm.get("evaluation")}getOptionArrayForm(i){return this.getEvaluationArrayForm().controls[i]}back(){this.location.back()}static#t=this.\u0275fac=function(n){return new(n||v)(t.Y36(s.gz),t.Y36(c.Ye),t.Y36(f.qu),t.Y36(s.F0),t.Y36(b.c9),t.Y36(r.yh))};static#n=this.\u0275cmp=t.Xpm({type:v,selectors:[["frontend-my-evaluation-view"]],decls:0,vars:0,template:function(n,e){},encapsulation:2})}var X=a(529);class u{constructor(i){this.http=i,this.API_URL=O.N.API_URL}getMyLearnings(){return this.http.get(`${this.API_URL}/mylearning`)}patchMyLearning(i){return this.http.patch(`${this.API_URL}/mylearning/${i}`,{})}static#t=this.\u0275fac=function(n){return new(n||u)(t.LFG(X.eN))};static#n=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}var V=a(8505),j=a(9300),w=a(590),q=a(8746);class g{constructor(i){this.store=i,this.loading=!1}resolve(i,n){return this.store.pipe((0,r.Ys)(H),(0,V.b)(e=>{!this.loading&&!e&&(this.loading=!0,this.store.dispatch(U()))}),(0,j.h)(e=>e),(0,w.P)(),(0,q.x)(()=>this.loading=!1))}static#t=this.\u0275fac=function(n){return new(n||g)(t.LFG(r.yh))};static#n=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac})}var L=a(2655),D=a(4351),_=a(4004);class p{constructor(i,n,e){this.store=i,this.actions$=n,this.myLearningService=e,this.loadMyLearnings$=(0,L.GW)(()=>this.actions$.pipe((0,L.l4)(U),(0,D.b)(l=>this.myLearningService.getMyLearnings()),(0,_.U)(({result:l})=>T({myLearnings:l??[]}))))}static#t=this.\u0275fac=function(n){return new(n||p)(t.LFG(r.yh),t.LFG(L.eX),t.LFG(u))};static#n=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac})}const tt=[{path:"",component:d,resolve:{books:F.Kt,myLearnings:g}},{path:"id/:id",component:m,resolve:{books:F.Kt,orders:g}},{path:"myevaluation/:id",component:v}];class A{static#t=this.\u0275fac=function(n){return new(n||A)};static#n=this.\u0275mod=t.oAB({type:A});static#i=this.\u0275inj=t.cJS({providers:[u,g],imports:[c.ez,r.Aw.forFeature("myLearnings",E),L.sQ.forFeature([p]),s.Bz.forChild(tt),b.As]})}}}]);