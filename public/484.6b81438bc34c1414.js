"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[484],{5484:(K,v,s)=>{s.r(v),s.d(v,{MyOrdersModule:()=>W});var a=s(6814),u=s(4089),p=s(8180);const b={"place order":"bg-primary",purchased:"bg-success","pending cashback":"bg-secondary","claimable cashback":"bg-info","claimed cashback":"bg-dark",refunded:"bg-warning",failed:"bg-danger"};var t=s(4946),h=s(1309),y=s(9862);let g=(()=>{class o{constructor(e){this.http=e,this.API_URL=h.N.API_URL}getMyOrders(){return this.http.get(`${this.API_URL}/myorder`)}getMyOrderById(e){return this.http.get(`${this.API_URL}/myorder/id/${e}`)}getMyOrderEvaluation(e){return this.http.get(`${this.API_URL}/myorder/evaluation/${e}`)}patchMyOrderEvaluation(e){return this.http.patch(`${this.API_URL}/myorder/id/${e}`,{})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=s(8243),_=s(1076);function x(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td",12)(2,"div",13),t._UZ(3,"img",14),t.TgZ(4,"div")(5,"h6",15),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.TgZ(8,"span",16),t._uU(9),t.ALo(10,"titlecase"),t.qZA()()()(),t.TgZ(11,"td",17)(12,"h6",18),t._uU(13),t.ALo(14,"currency"),t.qZA()()()),2&o){const e=n.$implicit,i=t.oxw().$implicit,r=t.oxw(2);t.xp6(3),t.Q6J("src",e.image,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(7,5,e.name)," "),t.xp6(2),t.Q6J("ngClass",r.CONDITIONS[i.condition]),t.xp6(1),t.hij(" ",t.lcZ(10,7,i.condition)," "),t.xp6(4),t.hij(" ",t.lcZ(14,9,e.price)," ")}}function A(o,n){if(1&o&&(t.TgZ(0,"div",7)(1,"button",19)(2,"span"),t._uU(3," To Evaluation "),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink","/app/myorders/evaluation/"+e._id)}}function T(o,n){if(1&o&&(t.TgZ(0,"div",20)(1,"h5",21),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"button",22)(5,"span"),t._uU(6," Claim Cashback "),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ","Available "+t.xi3(3,1,e.dateClaimable,"MM/dd/yyyy"),"")}}function C(o,n){1&o&&(t.TgZ(0,"div",7)(1,"button",19)(2,"span"),t._uU(3," Claim Cashback "),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("routerLink","/app/settings"))}const O=function(o){return["/app/myorders/id/",o]};function U(o,n){if(1&o&&(t.TgZ(0,"div",5)(1,"table",6)(2,"thead")(3,"tr")(4,"th"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"th",7)(8,"a",8),t._uU(9," See invoice"),t.qZA()()()(),t.TgZ(10,"tbody"),t.YNc(11,x,15,11,"tr",9),t.qZA()(),t.YNc(12,A,4,1,"div",10),t.YNc(13,T,7,4,"div",11),t.YNc(14,C,4,1,"div",10),t.qZA()),2&o){const e=n.$implicit;t.xp6(5),t.hij("Purchased: ",t.lcZ(6,6,e.dateCreated)," "),t.xp6(3),t.Q6J("routerLink",t.VKq(8,O,e._id)),t.xp6(3),t.Q6J("ngForOf",e.books),t.xp6(1),t.Q6J("ngIf","purchased"===e.condition),t.xp6(1),t.Q6J("ngIf","pending cashback"===e.condition),t.xp6(1),t.Q6J("ngIf","claimable cashback"===e.condition)}}function k(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",3),t.YNc(2,U,15,10,"div",4),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.orders)}}function q(o,n){1&o&&t._UZ(0,"rb-nothing")}let M=(()=>{class o{constructor(e){this.myOrdersService=e,this.CONDITIONS=b}ngOnInit(){this.myOrdersService.getMyOrders().pipe((0,p.q)(1)).subscribe(({result:e})=>{e&&(this.orders=e.reverse()??[])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["lib-my-orders-list"]],decls:4,vars:2,consts:[["title","My orders","subtitle","books"],[4,"ngIf","ngIfElse"],["nothing",""],[1,"container-fluid"],["class","table-responsive border rounded my-3 p-4",4,"ngFor","ngForOf"],[1,"table-responsive","border","rounded","my-3","p-4"],[1,"table","align-middle","text-nowrap"],[1,"text-end"],[1,"text-info",3,"routerLink"],[4,"ngFor","ngForOf"],["class","text-end",4,"ngIf"],["class","d-flex align-items-center  justify-content-end",4,"ngIf"],[1,"border-bottom-0"],[1,"d-flex","align-items-center","gap-3"],["alt","","width","80",1,"img-fluid","rounded",3,"src"],[1,"fw-semibold","fs-6","mb-0","ms-1"],[1,"mb-1","badge","rounded-pill","fs-3","mt-3",3,"ngClass"],[1,"text-end","border-bottom-0"],[1,"fs-4","fw-semibold","mb-0"],["type","button",1,"btn","btn-primary","print-page","px-4","py-3",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-end"],[1,"fw-semibold"],["type","button","disabled","",1,"btn","btn-primary","print-page","ms-4","px-4","py-3"]],template:function(e,i){if(1&e&&(t._UZ(0,"rb-sub-header",0),t.YNc(1,k,3,1,"ng-container",1),t.YNc(2,q,1,0,"ng-template",null,2,t.W1O)),2&e){const r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==i.orders.length)("ngIfElse",r)}},dependencies:[a.mk,a.sg,a.O5,u.rH,Z.v,_.$,a.rS,a.H9,a.uU],encapsulation:2}),o})();function I(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td",17),t._uU(2,"1"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"td",11),t._uU(7),t.ALo(8,"currency"),t.qZA()()),2&o){const e=n.$implicit;t.xp6(4),t.Oqu(t.lcZ(5,2,e.name)),t.xp6(3),t.Oqu(t.lcZ(8,4,e.price))}}let L=(()=>{class o{constructor(e,i){this.route=e,this.myOrdersService=i}reload(){this.route.params.subscribe(e=>{e.id&&(this.orderId=e.id)}),this.myOrdersService.getMyOrderById(this.orderId).pipe((0,p.q)(1)).subscribe(({result:e})=>{e&&(this.order=e)})}ngOnInit(){this.reload()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gz),t.Y36(g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["frontend-my-order-view"]],decls:66,vars:17,consts:[["title","Invoice ","subtitle","My Orders"],["id","custom-invoice",1,"p-3","container-fluid"],["id","printableArea",1,"invoice-123",2,"display","block"],[1,"row","pt-3"],[1,"col-6","col-md-4","my-2"],["src","assets/rb/logo-header.svg"],[1,"col-md-12"],[1,"ms-4","mt-2"],[1,"fs-4"],[1,"fw-bold"],[1,"ms-1"],[1,"text-end"],[1,"fw-bold","invoice-customer"],[1,"mt-4","mb-1","fs-4"],[1,"ti","ti-calendar"],[1,"table-responsive","mt-5",2,"clear","both"],[1,"table","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"pull-right","mt-4","text-end"],[1,"clearfix"]],template:function(e,i){1&e&&(t._UZ(0,"rb-sub-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"div",6)(7,"div",7)(8,"address")(9,"h6"),t._uU(10,"Order#: "),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"address",8)(14,"h6"),t._uU(15,"\xa0From,"),t.qZA(),t.TgZ(16,"h6",9),t._uU(17,"\xa0Robin Boook LLC"),t.qZA(),t.TgZ(18,"p",10),t._uU(19," 312 W. 2nd St, Casper, "),t._UZ(20,"br"),t._uU(21,"Wyoming 82601, US "),t._UZ(22,"br"),t._uU(23,"www.robinboook.com "),t.qZA()()(),t.TgZ(24,"div",11)(25,"address")(26,"h6"),t._uU(27,"Sold To,"),t.qZA(),t.TgZ(28,"h6",12),t._uU(29),t.ALo(30,"titlecase"),t.ALo(31,"titlecase"),t.qZA(),t.TgZ(32,"p",13)(33,"span"),t._uU(34,"Invoice Date :"),t.qZA(),t._UZ(35,"i",14),t._uU(36),t.ALo(37,"date"),t.qZA()()()(),t.TgZ(38,"div",6)(39,"div",15)(40,"table",16)(41,"thead")(42,"tr")(43,"th",17),t._uU(44,"#"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Description"),t.qZA(),t.TgZ(47,"th",11),t._uU(48,"Total"),t.qZA()()(),t.TgZ(49,"tbody"),t.YNc(50,I,9,6,"tr",18),t.qZA()()()(),t.TgZ(51,"div",6)(52,"div",19)(53,"p"),t._uU(54),t.ALo(55,"currency"),t.qZA(),t.TgZ(56,"p"),t._uU(57,"Discount (0%) : $0.00"),t.qZA(),t._UZ(58,"hr"),t.TgZ(59,"h3")(60,"b"),t._uU(61,"Total :"),t.qZA(),t._uU(62),t.ALo(63,"currency"),t.qZA()(),t._UZ(64,"div",20)(65,"hr"),t.qZA()()()()),2&e&&(t.xp6(12),t.hij(" ",i.order._id," "),t.xp6(17),t.AsE(" ",t.lcZ(30,7,i.order.user.lastName),", ",t.lcZ(31,9,i.order.user.name)," "),t.xp6(7),t.hij(" ",t.lcZ(37,11,i.order.dateCreated)," "),t.xp6(14),t.Q6J("ngForOf",i.order.books),t.xp6(4),t.hij("Sub - Total amount: ",t.lcZ(55,13,i.order.price),""),t.xp6(8),t.hij(" ",t.lcZ(63,15,i.order.price),""))},dependencies:[a.sg,_.$,a.rS,a.H9,a.uU],encapsulation:2}),o})();var F=s(7559),c=s(95),w=s(1747),E=s(8963);function N(o,n){if(1&o&&(t.TgZ(0,"div",25),t._UZ(1,"input",26),t.TgZ(2,"label",27),t._uU(3),t.qZA()()),2&o){const e=n.$implicit,i=n.index;t.xp6(1),t.Q6J("value",i),t.xp6(2),t.hij(" ",e," ")}}function J(o,n){1&o&&(t.TgZ(0,"small",28),t._uU(1,"*This is incorrect "),t.qZA())}const Y=function(){return["question"]},Q=function(){return["options"]},S=function(){return["selectedOption"]};function $(o,n){if(1&o&&(t.TgZ(0,"div",20),t.ynx(1,21),t.TgZ(2,"h6",22),t._uU(3),t.qZA(),t.YNc(4,N,4,2,"div",23),t.YNc(5,J,2,0,"small",24),t.BQk(),t.qZA()),2&o){const e=n.$implicit,i=n.index,r=t.oxw(3);let d,l,m;t.xp6(1),t.Q6J("formGroupName",i),t.xp6(2),t.hij(" ",null==(d=e.get(t.DdM(4,Y)))?null:d.value," "),t.xp6(1),t.Q6J("ngForOf",null==(l=e.get(t.DdM(5,Q)))?null:l.value),t.xp6(1),t.Q6J("ngIf",r.submited&&(null==(m=e.get(t.DdM(6,S)))?null:m.invalid))}}const j=function(){return["name"]};function G(o,n){if(1&o&&(t.TgZ(0,"div",7)(1,"div",16)(2,"h5",17),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.ynx(5,18),t.YNc(6,$,6,7,"div",19),t.BQk(),t.qZA()()),2&o){const e=n.$implicit,i=n.index,r=t.oxw(2);let d;t.xp6(1),t.Q6J("formGroupName",i),t.xp6(2),t.hij(" ",t.lcZ(4,3,null==(d=e.get(t.DdM(5,j)))?null:d.value)," "),t.xp6(3),t.Q6J("ngForOf",r.evaluationControls(i).controls)}}function B(o,n){1&o&&(t.TgZ(0,"button",29),t._uU(1," Claim Cashback "),t.qZA())}function D(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.reloadForm())}),t._uU(1," Try Again "),t.qZA()}}function R(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",4),t.NdJ("submit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.submit())}),t.TgZ(2,"div",5),t.YNc(3,G,7,6,"div",6),t.qZA(),t.TgZ(4,"div",7)(5,"div",8)(6,"div",9)(7,"div")(8,"div",10),t._UZ(9,"i",11),t.TgZ(10,"h5",12),t._uU(11,"Remember,"),t.qZA()(),t.TgZ(12,"p",13),t._uU(13," You must answer all the questions correctly before submitting. "),t.qZA()(),t.YNc(14,B,2,0,"button",14),t.YNc(15,D,2,0,"ng-template",null,15,t.W1O),t.qZA()()()(),t.BQk()}if(2&o){const e=t.MAs(16),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.myForm),t.xp6(2),t.Q6J("ngForOf",i.booksControls.controls),t.xp6(11),t.Q6J("ngIf",!i.submited)("ngIfElse",e)}}function P(o,n){1&o&&t._UZ(0,"rb-preloader")}let V=(()=>{class o{get booksControls(){return this.myForm.get("books")}constructor(e,i,r,d,l){this.route=e,this.myOrdersService=i,this.fb=r,this.router=d,this.vs=l,this.submited=!1,this.myForm=this.fb.group({books:this.fb.array([])})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.orderId=e.id)}),this.myOrdersService.getMyOrderEvaluation(this.orderId).pipe((0,p.q)(1)).subscribe(e=>{this.books=e.result||[],console.log(this.books),this.addEvaluations(this.books)})}addEvaluations(e){const i=this.myForm.get("books"),r=e;for(const d of r){const l=this.fb.array([]);for(const f of d.evaluation){const X=this.fb.group({question:[f.question],options:[f.options],selectedOption:[null,[c.kI.required,this.vs.equalToValidator(f.correctOption)]]});l.push(X)}const m=this.fb.group({name:d.name,evaluation:l});i.push(m)}}evaluationControls(e){return this.booksControls.controls[e].get("evaluation")}selectedOptionControl(e,i){return this.evaluationControls(e).controls[i].get(["selectedOption"])}submit(){this.submited=!0,!this.myForm.invalid&&this.myOrdersService.patchMyOrderEvaluation(this.orderId).pipe((0,p.q)(1)).subscribe(e=>{e.ok&&this.router.navigateByUrl("/app/myorders")})}reloadForm(){window.location.reload()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gz),t.Y36(g),t.Y36(c.qu),t.Y36(u.F0),t.Y36(w.S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["lib-evaluation"]],decls:5,vars:2,consts:[["title","Evaluation","subtitle","My Orders"],[1,"container-fluid"],[4,"ngIf","ngIfElse"],["preloader",""],[3,"formGroup","submit"],["formArrayName","books"],["class","card w-100 position-relative overflow-hidden",4,"ngFor","ngForOf"],[1,"card","w-100","position-relative","overflow-hidden"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex"],[1,"ti","ti-bow","fs-6","me-2","text-primary"],[1,"card-title","fw-semibold"],[1,"card-subtitle"],["type","submit","class","btn btn-primary py-3 rounded-2",4,"ngIf","ngIfElse"],["reload",""],[1,"card-body","p-4",3,"formGroupName"],[1,"card-title","mb-4"],["formArrayName","evaluation"],["class","my-4",4,"ngFor","ngForOf"],[1,"my-4"],[3,"formGroupName"],[1,"card-subtitle","fw-semibold"],["class","form-check ms-3 my-3",4,"ngFor","ngForOf"],["class","text-danger fs-3",4,"ngIf"],[1,"form-check","ms-3","my-3"],["type","radio","id","flexCheckChecked","formControlName","selectedOption",1,"form-check-input","primary","fs-4",3,"value"],["for","flexCheckChecked",1,"form-check-label","text-dark","fs-4"],[1,"text-danger","fs-3"],["type","submit",1,"btn","btn-primary","py-3","rounded-2"],[1,"btn","btn-danger","py-3","rounded-2",3,"click"]],template:function(e,i){if(1&e&&(t._UZ(0,"rb-sub-header",0),t.TgZ(1,"div",1),t.YNc(2,R,17,4,"ng-container",2),t.YNc(3,P,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const r=t.MAs(4);t.xp6(2),t.Q6J("ngIf",i.books)("ngIfElse",r)}},dependencies:[a.sg,a.O5,_.$,E.T,c._Y,c.Fj,c._,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,a.rS]}),o})();var H=s(9325);const z=[{path:"",children:[{path:"",component:M},{path:"id/:id",component:L},{path:"evaluation/:id",component:V},{path:"claim/:id",component:(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["lib-claim"]],decls:2,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"claim works!"),t.qZA())}}),o})()}]}];let W=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,u.Bz.forChild(z),F.K,c.UX,H.A]}),o})()}}]);